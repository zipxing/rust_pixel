## Why

- 需要一个自动关卡生成器：给定一张小像素画（如 8×8，像素值 0=背景，1-15=颜色），自动用俄罗斯方块形状覆盖所有非背景像素，**每个方块只能覆盖同一颜色的像素**，拼出来的图与原始位图颜色完全一致
- 玩法核心：玩家点击方块上的箭头，如果该方向无遮挡则方块飞走，清除所有方块即通关
- 当前 `apps/block_arrow` 只有模板骨架（扑克牌 demo），需要完整重写为方块箭头谜题游戏
- 先实现 terminal 模式，确保核心算法正确后再扩展图形模式

## What Changes

### 关卡生成器（核心算法）

- **ADDED** `apps/block_arrow/lib/src/lib.rs` — 方块定义、关卡自动生成算法
  - polyomino 形状定义（monomino, domino, triomino, tetromino, pentomino），含旋转/翻转变体
  - 参考 `apps/colorblk/lib/src/shape.rs` 的 `BlockData` 格式，用相对坐标集合 `Vec<(i8,i8)>` 表示
  - 覆盖算法：给定 pixel art bitmap（0=背景，1-15=颜色，最大 16×16），按颜色分区，用回溯搜索将同色像素用方块无重叠全覆盖
  - 箭头分配：为每个方块分配一个方向（上/下/左/右），确保存在一个移除顺序使所有方块可飞走（可解性验证）
  - 随机化策略：多次尝试不同放置顺序和块类型组合，选择解最优（步数最少）的关卡
  - 实例数据1：
  001111100
  011112210
  122111211
  122213222
  221121122
  121121122
  112211221
  012221110
  001211100
  - 实例数据2：
  044444440
  444444444
  445544444
  445555555
  445565565
  455555555
  455557755
  445555554
  446681844


### 游戏模型

- **MODIFIED** `apps/block_arrow/src/model.rs` — 从扑克牌 demo 重写为方块谜题
  - 棋盘网格（如 8×8），每个格子记录方块 ID
  - 方块列表：每个方块有形状、颜色、位置、箭头方向
  - 输入处理：方向键选中方块，回车/空格触发飞走
  - 胜利判定：所有方块移除则通关

### 终端渲染

- **MODIFIED** `apps/block_arrow/src/render_terminal.rs` — 终端模式下绘制方块谜题
  - 棋盘网格绘制，每个方块用不同颜色
  - 箭头符号显示（▲▼◀▶）
  - 光标高亮当前选中方块
  - 参考 colorblk 的 border 计算和颜色系统

### 核心设计原则

1. **颜色一致性**：每个方块只覆盖同色像素，拼图结果与原始像素画完全一致
2. **先终端后图形**：terminal 模式验证算法，graphics 模式后续迭代
3. **复用 colorblk 模式**：形状定义、颜色系统、网格渲染模式
4. **可解性保证**：生成关卡时验证存在合法解序列

## Impact

- 重写 `apps/block_arrow/lib/src/lib.rs`（当前是扑克牌数据）
- 重写 `apps/block_arrow/src/model.rs`（当前是扑克牌 demo）
- 重写 `apps/block_arrow/src/render_terminal.rs`（当前是扑克牌渲染）
- `render_graphics.rs` 暂不修改，后续迭代
- 不影响引擎代码或其他 app

## Success Criteria

- **MVP-0**: 方块定义 + 覆盖算法：给定 8×8 位图，能用方块无缝覆盖
- **MVP-1**: 箭头分配 + 可解性验证：生成的关卡保证可解
- **MVP-2**: terminal 模式可交互：玩家能选中方块、点飞、通关
